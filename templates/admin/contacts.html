{% extends '_base.html' %}
{% block content %}
  <h2>Contatos Recebidos</h2>
  {% if contacts %}
    <table class="data-table">
      <thead>
        <tr>
          <th>Nome</th>
          <th>Email</th>
          <th>Mensagem</th>
          <th>Data</th>
          <th>Status</th>
          <th>Ação</th>
        </tr>
      </thead>
      <tbody>
        {% for c in contacts %}
        <tr class="{{ 'responded' if c.responded }}">
          <td>{{ c.name }}</td>
          <td>{{ c.email }}</td>
          <td style="max-width: 400px;">{{ c.message }}</td>
          <td>{{ c.created_at.strftime('%d/%m/%Y %H:%M') }}</td>
          <td>
            {% if c.responded %}
              <span class="badge badge-success">Respondido</span>
            {% else %}
              <span class="badge badge-warning">Pendente</span>
            {% endif %}
          </td>
          <td>
            {% if not c.responded %}
              <form method="post" action="{{ url_for('admin.admin_contact_responded', cid=c.id) }}">
                <button class="btn alt" type="submit">Marcar como respondido</button>
              </form>
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>Nenhum contato recebido ainda.</p>
  {% endif %}
{% endblock %}
